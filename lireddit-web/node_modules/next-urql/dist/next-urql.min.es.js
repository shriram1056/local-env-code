import n,{useState as e,createElement as t}from"react";import r from"react-ssr-prepass";import{createClient as i,ssrExchange as o,dedupExchange as u,cacheExchange as a,fetchExchange as l,Provider as s}from"urql";function c(){return(c=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}var f,p=null;function v(){p=null}function d(){return null}function h(n,e){var t="undefined"==typeof window;return!t&&p||((p=i(c({},n,{suspense:e&&(t||n.suspense)}))).toJSON=d),p}function m(){}function q(i,p){return p||(p={}),function(d){var q=Boolean((d.getInitialProps||p.ssr)&&!p.neverSuspend),g=function(r){var p=r.urqlClient,m=r.urqlState,g=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&-1===e.indexOf(r)&&(t[r]=n[r]);return t}(r,["urqlClient","urqlState"]),P=e(0),y=n.useMemo((function(){if(p)return p;f&&"undefined"!=typeof window||(f=o({initialState:m}));var n=i(f);return n.exchanges||(n.exchanges=[u,a,f,l]),h(n,q)}),[p,m,P[0]]);return t(s,{value:y},t(d,c({},g,{urqlClient:y,resetUrqlClient:function(){v(),f=o({initialState:void 0}),P[1](P[0]+1)}})))};return g.displayName="withUrqlClient("+(d.displayName||d.name||"Component")+")",(d.getInitialProps||p.ssr)&&(g.getInitialProps=function(n){function e(){return c({},S,{urqlState:P?P.extractData():void 0,urqlClient:C})}function s(){if("undefined"!=typeof window)return c({},S,{urqlClient:C});var n=c({},S,{urqlClient:C}),i=q?n:{pageProps:n};const o=function(){if(!p.neverSuspend)return Promise.resolve(r(t(v,i))).then(m)}();return o&&o.then?o.then(e):e()}function f(n){S=n}try{var v=n.AppTree,q=!!n.Component,g=q?n.ctx:n,P=o({initialState:void 0}),y=i(P,g);y.exchanges||(y.exchanges=[u,a,P,l]);var C=h(y,!p.neverSuspend);C&&(g.urqlClient=C);var S={};const e=function(){if(d.getInitialProps)return Promise.resolve(d.getInitialProps(n)).then(f)}();return Promise.resolve(e&&e.then?e.then(s):s())}catch(n){return Promise.reject(n)}}),g}}export{h as initUrqlClient,q as withUrqlClient};
//# sourceMappingURL=next-urql.min.es.js.map
